<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>test</title>
    <script src="tabletop.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script>

        tabletop_global = null;
        var public_spreadsheet_url = 'https://docs.google.com/spreadsheets/d/1XwSmfChMh2-JJ8s91-DkFZnKzm4v1Wo13JxS4NhbOzw/edit?usp=sharing';

        function init() {
            Tabletop.init({
                key: public_spreadsheet_url,
                callback: showInfo
            })
        }

        function showInfo(data, tabletop) {
            data = tabletop.sheets("crags").elements
            console.log(data);
            var tr;
            for (var i = 0; i < data.length; i++) {
                tr = $('<tr/>');
                tr.append("<td>" + data[i].crag + "</td>");
                tr.append("<td>" + data[i].parking_location + "</td>");
                tr.append("<td>" + data[i].location + "</td>");
                tr.append("<td>" + data[i].image + "</td>");
                tr.append("<td>" + data[i].description + "</td>");
                tr.append("<td>" + "<a href='crag.html?crag=" + data[i].sheet + "&thecragid=" + data[i].thecrag_id  + "'>" + data[i].sheet + "</a></td>");
                $('table').append(tr);
            }
        }

        window.addEventListener('DOMContentLoaded', init);

    </script>

</head>

<body>

<table class="table">
    <tr>
        <th>crag</th>
        <th>parking_location</th>
        <th>location</th>
        <th>image</th>
        <th>description</th>
        <th>link</th>
    </tr>
</table>
</body>
</html>
